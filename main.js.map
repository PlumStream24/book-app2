{"version":3,"sources":["./src/app/details/details.component.ts","./src/app/details/details.component.html","./src/app/home/home.component.ts","./src/app/home/home.component.html","./src/environments/environment.ts","./src/app/cache/request-cache.service.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/cache/caching-interceptor.service.ts","./src/app/app.module.ts","./src/app/idb/idb.service.ts","./src/app/search/search.component.ts","./src/app/search/search.component.html","./src/app/books/books.service.ts","./src/app/app-routing.module.ts","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,MAAM,gBAAgB;IAI3B,YAAoB,KAAqB;QAArB,UAAK,GAAL,KAAK,CAAgB;IAAI,CAAC;IAE9C,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YAC5D,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAED,aAAa,CAAC,IAAI;QAChB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;;gFAlBU,gBAAgB;gGAAhB,gBAAgB;QCT7B,wEAAe;QAAA,uEAAY;QAAA,4DAAK;QAChC,yEAAiF;QAC/E,8EAAoE;QAClE,qEAAI;QAAA,uDAAc;QAAA,4DAAK;QACvB,oEAA0E;QAC1E,qEAAI;QAAA,kEAAO;QAAA,4DAAK;QAChB,oEAAG;QACD,wDACF;QAAA,4DAAI;QACJ,sEAAI;QAAA,qEAAS;QAAA,4DAAK;QAClB,qEAAG;QACD,wDACF;QAAA,4DAAI;QACN,4DAAW;QACb,4DAAM;;QAXE,0DAAc;QAAd,+EAAc;QACb,0DAAkE;QAAlE,8MAAkE;QAGrE,0DACF;QADE,4FACF;QAGE,0DACF;QADE,yFACF;;;;;;;;;;;;;;;;;;;;;;;;;ACVyD;;;;;;;;;ICEvD,yEAAsC;IAAA,gEAAK;IAAA,4DAAK;;;IAChD,yEAAoC;IAAC,uDAAe;IAAA,4DAAK;;;IAApB,0DAAe;IAAf,0FAAe;;;IAGpD,yEAAsC;IAAA,iEAAM;IAAA,4DAAK;;;IACjD,yEAAoC;IAAC,uDAAoD;IAAA,4DAAK;;;IAAzD,0DAAoD;IAApD,mIAAoD;;;IAGzF,yEAAsC;IAAA,oEAAS;IAAA,4DAAK;;;IACpD,yEAAoC;IAAC,uDAA4B;IAAA,4DAAK;;;IAAjC,0DAA4B;IAA5B,uGAA4B;;;IAGjE,oEAA2C;;;;IAC3C,yEAAoC;IAClC,6EAAoD;IAA5B,8VAA2B;IAAC,2EAAU;IAAA,qEAAU;IAAA,4DAAW;IAAA,4DAAS;IAC9F,4DAAK;;;IAEP,oEAA4D;;;IAC5D,oEAAkE;;ADX/D,MAAM,aAAa;IAMxB,YAAoB,KAAqB,EACrB,MAAc,EACd,WAAyB;QAFzB,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAc;QAL7C,qBAAgB,GAAa,CAAC,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,SAAS,CAAC,CAAC;QAC3E,UAAK,GAAG,IAAI,0EAAkB,EAAO,CAAC;IAIW,CAAC;IAElD,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YAC5D,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAEK,YAAY,CAAC,KAAa;;YAC9B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YAE3D,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAC5C,CAAC;KAAA;IAED,WAAW,CAAC,IAAI;QACd,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,EAAE,EAAE,WAAW,EAAE;gBAC/C,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,OAAO,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;gBACxD,IAAI,EAAE,IAAI,CAAC,kBAAkB;gBAC7B,QAAQ,EAAE,IAAI,CAAC,iBAAiB;aACjC,EAAC,CAAC,CAAC;IACN,CAAC;;0EAlCU,aAAa;6FAAb,aAAa;QCX1B,qEAAI;QAAA,kEAAO;QAAA,4DAAK;QAChB,yEAAiF;QAC/E,2EAAgG;QAC9F,2EAAmC;QACjC,uGAAgD;QAChD,uGAAyD;QAC3D,qEAAe;QACf,2EAAoC;QAClC,uGAAiD;QACjD,uGAA8F;QAChG,qEAAe;QACf,4EAAyC;QACvC,yGAAoD;QACpD,yGAAsE;QACxE,qEAAe;QACf,4EAAqC;QACnC,yGAA2C;QAC3C,yGAEK;QACP,qEAAe;QACf,yGAA4D;QAC5D,yGAAkE;QACpE,4DAAQ;QACV,4DAAM;;QAtB8C,0DAAoB;QAApB,iFAAoB;QAmBhD,2DAAiC;QAAjC,iGAAiC;QACpB,0DAA0B;QAA1B,kGAA0B;;;;;;;;;;;;;;ACtB/D;AAAA;AAAA,gFAAgF;AAChF,0EAA0E;AAC1E,gEAAgE;AAEzD,MAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;;GAMG;AACH,mEAAmE;;;;;;;;;;;;;;;;;ACZnE,MAAM,MAAM,GAAG,KAAK,CAAC;AAId,MAAM,YAAY;IAHzB;QAKE,UAAK,GAAG,IAAI,GAAG,EAAE,CAAC;KAyBnB;IAvBC,GAAG,CAAC,GAAqB;QACvB,MAAM,GAAG,GAAG,GAAG,CAAC,aAAa,CAAC;QAC9B,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAEnC,IAAI,CAAC,MAAM,EAAE;YAAE,OAAO,SAAS,CAAC;SAAE;QAElC,MAAM,SAAS,GAAG,MAAM,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,MAAM,CAAC,CAAC;QAC1D,MAAM,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;QAC5C,OAAO,MAAM,CAAC,QAAQ,CAAC;IACzB,CAAC;IAED,GAAG,CAAC,GAAqB,EAAE,QAA2B;QACpD,MAAM,GAAG,GAAG,GAAG,CAAC,aAAa,CAAC;QAC9B,MAAM,KAAK,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC;QACtD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QAE3B,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,MAAM,CAAC;QACpC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;YAChC,IAAI,YAAY,CAAC,QAAQ,GAAG,OAAO,EAAE;gBACnC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;aACrC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;;wEA1BU,YAAY;+FAAZ,YAAY,WAAZ,YAAY,mBAFX,MAAM;;;;;;;;;;;;;ACHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoE;;;;;;;;;;;;;;;ICDlE,sEAAqB;IAAA,kEAAO;IAAA,4DAAM;;ADW7B,MAAM,YAAY;IAOvB,YAAoB,WAAwB,EACxB,MAAc,EACd,MAAc,EACd,IAAgB,EAChB,UAAsB;QAJtB,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,WAAM,GAAN,MAAM,CAAQ;QACd,SAAI,GAAJ,IAAI,CAAY;QAChB,eAAU,GAAV,UAAU,CAAY;QAV1C,UAAK,GAAG,UAAU,CAAC;QAIF,mBAAc,GAAG,yFAAyF,CAAC;IAQ5H,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACvC,MAAM,EAAE,CAAC,EAAE,EAAE,yDAAU,CAAC,QAAQ,CAAC;SAClC,CAAC,CAAC;QACH,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC1E,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE1E,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,SAAS,CACtC,CAAC,EAAC,MAAM,EAAE,YAAY,EAAC,EAAE,EAAE;YACzB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC,CACF;IACH,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE;YAAE,OAAO;SAAE;QACvC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,WAAW,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAC,EAAC,CAAC,CAAC;IACjG,CAAC;IAED,qBAAqB;QACnB,IAAI,CAAC,OAAO,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC;QACjC,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;IACzC,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;YAC1B,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;YAC3C,OAAO;SACR;QAED,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC;YAC9B,eAAe,EAAE,IAAI,CAAC,cAAc;SACrC,CAAC;aACD,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAChC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACvB,CAAC,CAAC;aACD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACjC,CAAC;IAED,MAAM;QACJ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAE5B,IAAI,IAAI,CAAC,SAAS,IAAI,SAAS,EAAE;YAC/B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,wCAAwC,EAAE,IAAI,CAAC,SAAS,EACvE;gBACE,OAAO,EAAE;oBACP,cAAc,EAAE,iCAAiC;oBACjD,6BAA6B,EAAE,GAAG;iBACnC;aACF,CAAC;iBACD,SAAS,CACR,GAAG,CAAC,EAAE,GAAE,CAAC,EACT,GAAG,CAAC,EAAE;gBACJ,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC;qBACpC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;qBACzB,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACtB,CAAC,CACF;SACF;IACH,CAAC;IAED,cAAc;QACZ,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAE,CACpD,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CACtC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;IACtB,CAAC;;wEAnFU,YAAY;4FAAZ,YAAY;QCZzB,iFAAsD;QACpD,wGAAkC;QAClC,uEAAM;QACJ,4EAAkC;QAAA,uDAAS;QAAA,4DAAS;QACpD,4EAAkC;QAAA,2EAAU;QAAA,+DAAI;QAAA,4DAAW;QAAA,4DAAS;QACpE,4EAAsC;QAAnB,oIAAS,YAAQ,IAAC;QAAC,gEAAK;QAAA,4DAAS;QACtD,4DAAO;QACP,0EAAgD;QAC9C,2EAAuD;QAAxB,yIAAY,cAAU,IAAC;QACpD,0EAAyB;QACvB,uEAAsG;QACtG,0EAAgC;QAC9B,6EAAuC;QACrC,4EAAU;QAAA,kEAAM;QAAA,4DAAW;QAC7B,4DAAS;QACX,4DAAM;QACR,4DAAM;QACR,4DAAO;QACT,4DAAM;QACN,8EAA6E;QAC3E,4EAAU;QAAA,gEAAI;QAAA,4DAAW;QAC3B,4DAAS;QACX,4DAAc;QACd,oFAA8C;QAC5C,8EAAqC;QACnC,4EAAU;QAAA,gEAAI;QAAA,4DAAW;QACzB,kEACF;QAAA,4DAAS;QAET,2EAAuD;QAAxB,yIAAY,cAAU,IAAC;QACpD,0EAAyB;QACvB,uEAAsG;QACtG,0EAAgC;QAC9B,6EAAkC;QAChC,4EAAU;QAAA,mEAAO;QAAA,4DAAW;QAC9B,4DAAS;QACX,4DAAM;QACR,4DAAM;QACR,4DAAO;QACT,4DAAW;QACX,4EAA+B;;;QAvCvB,0DAAa;QAAb,6EAAa;QAEiB,0DAAS;QAAT,0EAAS;QAKrC,0DAAwB;QAAxB,qFAAwB;QAWb,0DAA6B;QAA7B,qFAA6B;QAU1C,0DAAwB;QAAxB,qFAAwB;;;;;;;;;;;;;;AC5BhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0G;AACpE;AACD;;;AAI9B,MAAM,kBAAkB;IAC7B,YAAoB,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;IAAG,CAAC;IAE3C,SAAS,CAAC,GAAqB,EAAE,IAAiB;QAChD,MAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,OAAO,cAAc,CAAC,CAAC,CAAC,+CAAE,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IACvF,CAAC;IAED,WAAW,CAAC,GAAqB,EAAE,IAAiB,EACxC,KAAmB;QAC7B,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAC1B,0DAAG,CAAC,KAAK,CAAC,EAAE;YACV,IAAI,KAAK,YAAY,iEAAY,EAAE;gBACjC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;aACvB;QACH,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;;oFAjBU,kBAAkB;qGAAlB,kBAAkB,WAAlB,kBAAkB;;;;;;;;;;;;;ACP/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AAEiB;AACT;AAEa;AACvB;AAEA;AACT;AACc;AACN;AACA;AACA;AACI;AACF;AACI;AACiB;AACxB;AACM;AACG;AACD;AACJ;AACe;;;AAqClE,MAAM,SAAS;;kEAAT,SAAS;yFAAT,SAAS,cAFR,2DAAY;8FAHb;QACT,EAAE,OAAO,EAAE,sEAAiB,EAAE,QAAQ,EAAE,sFAAkB,EAAE,KAAK,EAAE,IAAI,EAAE;KAC1E,YAzBQ;YACP,uEAAa;YACb,qEAAgB;YAChB,4FAAuB;YACvB,qEAAgB;YAChB,0DAAW;YACX,kEAAmB;YACnB,0EAAgB;YAChB,oEAAa;YACb,oEAAa;YACb,qEAAa;YACb,yEAAe;YACf,uEAAc;YACd,2EAAgB;YAChB,4FAAwB;YACxB,oEAAgB;YAChB,4EAAmB,CAAC,QAAQ,CAAC,mBAAmB,EAAE;gBAChD,OAAO,EAAE,sEAAW,CAAC,UAAU;gBAC/B,0DAA0D;gBAC1D,+CAA+C;gBAC/C,oBAAoB,EAAE,0BAA0B;aACjD,CAAC;SACH;oIAMU,SAAS,mBAjClB,2DAAY;QACZ,mEAAa;QACb,yEAAe;QACf,4EAAgB,aAGhB,uEAAa;QACb,qEAAgB;QAChB,4FAAuB;QACvB,qEAAgB;QAChB,0DAAW;QACX,kEAAmB;QACnB,0EAAgB;QAChB,oEAAa;QACb,oEAAa;QACb,qEAAa;QACb,yEAAe;QACf,uEAAc;QACd,2EAAgB;QAChB,4FAAwB;QACxB,oEAAgB;;;;;;;;;;;;;;;;;;;AC9CiC;;AAK9C,MAAM,UAAU;IAGrB;QACE,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAEI,SAAS;;YACb,IAAI,CAAC,EAAE,GAAG,MAAM,kDAAM,CAAK,OAAO,EAAE,CAAC,EAAE;gBACrC,OAAO,CAAC,EAAE;oBACR,EAAE,CAAC,iBAAiB,CAAC,aAAa,CAAC;gBACrC,CAAC;aACF,CAAC;QACJ,CAAC;KAAA;IAED,KAAK,CAAC,EAAoB;QACxB,IAAI,GAAG,GAAG;YACR,QAAQ,EAAE,8LAA8L;YACxM,cAAc,EAAE,IAAI;YACpB,IAAI,EAAE;gBACJ,MAAM,EAAE,yFAAyF;gBACjG,IAAI,EAAE,wBAAwB;aAC/B;SACF;QACD,OAAO,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,aAAa,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC;IACrD,CAAC;IAED,QAAQ,CAAC,GAAW;QAClB,OAAO,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;IAC5C,CAAC;;oEA7BU,UAAU;6FAAV,UAAU,WAAV,UAAU,mBAFT,MAAM;;;;;;;;;;;;;;;;;;;;;;;;ACFyC;;;;;;;;;ICEvD,yEAAsC;IAAA,gEAAK;IAAA,4DAAK;;;IAChD,yEAAoC;IAAC,uDAAe;IAAA,4DAAK;;;IAApB,0DAAe;IAAf,0FAAe;;;IAGpD,yEAAsC;IAAA,iEAAM;IAAA,4DAAK;;;IACjD,yEAAoC;IAAC,uDAAoD;IAAA,4DAAK;;;IAAzD,0DAAoD;IAApD,mIAAoD;;;IAGzF,yEAAsC;IAAA,oEAAS;IAAA,4DAAK;;;IACpD,yEAAoC;IAAC,uDAA4B;IAAA,4DAAK;;;IAAjC,0DAA4B;IAA5B,uGAA4B;;;IAGjE,oEAA2C;;;;IAC3C,yEAAoC;IAClC,6EAAoD;IAA5B,gWAA2B;IAAC,2EAAU;IAAA,qEAAU;IAAA,4DAAW;IAAA,4DAAS;IAC9F,4DAAK;;;IAEP,oEAA4D;;;IAC5D,oEAAkE;;ADX/D,MAAM,eAAe;IAM1B,YAAoB,KAAqB,EACrB,MAAc,EACd,WAAyB;QAFzB,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAc;QAL7C,qBAAgB,GAAa,CAAC,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,SAAS,CAAC,CAAC;QAC3E,UAAK,GAAG,IAAI,0EAAkB,EAAO,CAAC;IAIW,CAAC;IAElD,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YAC5D,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAEK,WAAW,CAAC,KAAa;;YAC7B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAE1D,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;QACjC,CAAC;KAAA;IAED,WAAW,CAAC,IAAI;QACd,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,EAAE,EAAE,WAAW,EAAE;gBAC/C,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,OAAO,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;gBACxD,IAAI,EAAE,IAAI,CAAC,kBAAkB;gBAC7B,QAAQ,EAAE,IAAI,CAAC,iBAAiB;aACjC,EAAC,CAAC,CAAC;IACN,CAAC;;8EAlCU,eAAe;+FAAf,eAAe;QCX5B,wEAAe;QAAA,yEAAc;QAAA,4DAAK;QAClC,yEAAiF;QAC/E,2EAAgG;QAC9F,2EAAmC;QACjC,yGAAgD;QAChD,yGAAyD;QAC3D,qEAAe;QACf,2EAAoC;QAClC,yGAAiD;QACjD,yGAA8F;QAChG,qEAAe;QACf,4EAAyC;QACvC,2GAAoD;QACpD,2GAAsE;QACxE,qEAAe;QACf,4EAAqC;QACnC,2GAA2C;QAC3C,2GAEK;QACP,qEAAe;QACf,2GAA4D;QAC5D,4GAAkE;QACpE,4DAAQ;QACV,4DAAM;;QAtB8C,0DAAoB;QAApB,iFAAoB;QAmBhD,2DAAiC;QAAjC,iGAAiC;QACpB,0DAA0B;QAA1B,kGAA0B;;;;;;;;;;;;;;;;;;;;ACrBY;;;AAE3E,MAAM,OAAO,GAAG,yBAAyB,CAAC;AAKnC,MAAM,YAAY;IAEvB,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;IAAI,CAAC;IAEnC,GAAG,CAAC,KAAa,EAAE,IAAU;;YACjC,MAAM,GAAG,GAAG,OAAO,GAAC,KAAK,CAAC;YAC1B,IAAI,MAAM,GAAG,IAAI,+DAAU,EAAE,CAAC;YAE9B,IAAI,IAAI,KAAK,SAAS,EAAE;gBACtB,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;oBAC7C,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;gBACtC,CAAC,CAAC,CAAC;aACJ;YAED,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE;gBAChC,YAAY,EAAE,MAAM;gBACpB,MAAM,EAAE,MAAM;gBACd,OAAO,EAAE;oBACP,6BAA6B,EAAE,GAAG;oBAClC,8BAA8B,EAAE,UAAU;iBAC3C;aACF,CAAC,CAAC;YAEH,OAAO,IAAI,OAAO,CAAM,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;gBAC1C,MAAM,CAAC,SAAS,CAAC,OAAc,EAAE,MAAa,CAAC,CAAC;YAClD,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAED,WAAW,CAAC,KAAa;QACvB,OAAO,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,EAAC,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC;IACnD,CAAC;IAED,YAAY,CAAC,KAAa;QACxB,OAAO,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC,CAAC;IACnD,CAAC;;wEAlCU,YAAY;+FAAZ,YAAY,WAAZ,YAAY,mBAFX,MAAM;;;;;;;;;;;;;ACLpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuD;AACD;AACM;AACG;;;AAE/D,MAAM,MAAM,GAAW;IACrB,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,kEAAa,EAAE;IACtC,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,wEAAe,EAAE;IAC9C,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,2EAAgB,EAAE;CACjD,CAAC;AAMK,MAAM,gBAAgB;;gFAAhB,gBAAgB;+FAAhB,gBAAgB;mGAHlB,CAAC,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,EAC7B,4DAAY;mIAEX,gBAAgB,uFAFjB,4DAAY;;;;;;;;;;;;;;;;;;;ACduB;AAGF;AACY;AAEzD,IAAI,qEAAW,CAAC,UAAU,EAAE;IAC1B,oEAAc,EAAE,CAAC;CAClB;AAED,2EAAwB,CAAC,eAAe,CAAC,yDAAS,CAAC;KAChD,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;;;;;;;;;;;;ACXpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,qC","file":"main.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-details',\r\n  templateUrl: './details.component.html',\r\n  styleUrls: ['./details.component.css']\r\n})\r\nexport class DetailsComponent implements OnInit {\r\n  private subscription: Subscription;\r\n  book: any;\r\n\r\n  constructor(private route: ActivatedRoute) { }\r\n\r\n  ngOnInit() {\r\n    this.subscription = this.route.queryParams.subscribe(params => {\r\n      this.updateDetails(params);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  updateDetails(book) {\r\n    this.book = book;\r\n  }\r\n}\r\n","<h1 class=\"h1\">Book Details</h1>\r\n<div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutAlign=\"center\" class=\"products\">\r\n  <mat-card fxFlex=\"100%\" fxFlex.gt-sm=\"66%\" class=\"mat-elevation-z1\">\r\n    <h3>{{book.title}}</h3>\r\n    <img src=\"http://covers.openlibrary.org/b/OLID/{{book.cover_id}}-M.jpg\" />\r\n    <h4>Authors</h4>\r\n    <p>\r\n      {{book.authors}}\r\n    </p>\r\n    <h4>Published</h4>\r\n    <p>\r\n      {{book.year}}\r\n    </p>\r\n  </mat-card>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { BooksService } from '../books/books.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.css']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  private subscription: Subscription;\r\n\r\n  displayedColumns: string[] = ['title', 'author', 'publication', 'details'];\r\n  books = new MatTableDataSource<any>();\r\n\r\n  constructor(private route: ActivatedRoute,\r\n              private router: Router,\r\n              private bookService: BooksService) { }\r\n\r\n  ngOnInit() {\r\n    this.subscription = this.route.queryParams.subscribe(params => {\r\n      this.searchAuthor('George R R Martin');\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  async searchAuthor(query: string) {\r\n    const results = await this.bookService.searchAuthor(query);\r\n\r\n    this.books.data = results.docs.slice(0,5);\r\n  }\r\n\r\n  viewDetails(book) {\r\n    console.log(book);\r\n    this.router.navigate(['details'], { queryParams: {\r\n      title: book.title,\r\n      authors: book.author_name && book.author_name.join(', '),\r\n      year: book.first_publish_year,\r\n      cover_id: book.cover_edition_key\r\n    }});\r\n  }\r\n}\r\n","<h1>Library</h1>\r\n<div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutAlign=\"center\" class=\"products\">\r\n  <table mat-table fxFlex=\"100%\" fxFlex.gt-sm=\"66%\" [dataSource]=\"books\" class=\"mat-elevation-z1\">\r\n    <ng-container matColumnDef=\"title\">\r\n      <th mat-header-cell *matHeaderCellDef>Title</th>\r\n      <td mat-cell *matCellDef=\"let book\"> {{book.title}} </td>\r\n    </ng-container>\r\n    <ng-container matColumnDef=\"author\">\r\n      <th mat-header-cell *matHeaderCellDef>Author</th>\r\n      <td mat-cell *matCellDef=\"let book\"> {{book.author_name && book.author_name.join(', ')}} </td>\r\n    </ng-container>\r\n    <ng-container matColumnDef=\"publication\">\r\n      <th mat-header-cell *matHeaderCellDef>Pub. Year</th>\r\n      <td mat-cell *matCellDef=\"let book\"> {{book.first_publish_year}} </td>\r\n    </ng-container>\r\n    <ng-container matColumnDef=\"details\">\r\n      <th mat-header-cell *matHeaderCellDef></th>\r\n      <td mat-cell *matCellDef=\"let book\">\r\n        <button mat-icon-button (click)=\"viewDetails(book)\"><mat-icon>visibility</mat-icon></button>\r\n      </td>\r\n    </ng-container>\r\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n  </table>\r\n</div>\r\n\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpRequest, HttpResponse } from '@angular/common/http';\r\n\r\nconst maxAge = 30000;\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RequestCache  {\r\n\r\n  cache = new Map();\r\n\r\n  get(req: HttpRequest<any>): HttpResponse<any> | undefined {\r\n    const url = req.urlWithParams;\r\n    const cached = this.cache.get(url);\r\n\r\n    if (!cached) { return undefined; }\r\n\r\n    const isExpired = cached.lastRead < (Date.now() - maxAge);\r\n    const expired = isExpired ? 'expired ' : '';\r\n    return cached.response;\r\n  }\r\n\r\n  put(req: HttpRequest<any>, response: HttpResponse<any>): void {\r\n    const url = req.urlWithParams;\r\n    const entry = { url, response, lastRead: Date.now() };\r\n    this.cache.set(url, entry);\r\n\r\n    const expired = Date.now() - maxAge;\r\n    this.cache.forEach(expiredEntry => {\r\n      if (expiredEntry.lastRead < expired) {\r\n        this.cache.delete(expiredEntry.url);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { SwPush, SwRegistrationOptions } from '@angular/service-worker';\r\nimport { IdbService } from './idb/idb.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'book-app';\r\n  searchForm: FormGroup;\r\n  offline: boolean;\r\n  pushNotif: PushSubscription;\r\n  private readonly notifPublicKey = 'BPfuGqkKjhZ6KGBzJaJUKO1XkxjGQgAmYA3WZqIigu8xq129o542EoiQJuGV7gEykSTAVmUOE_aDklOU8FuiaOo';\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n              private router: Router,\r\n              private swPush: SwPush,\r\n              private http: HttpClient,\r\n              private idbService: IdbService) {\r\n    \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.searchForm = this.formBuilder.group({\r\n      search: ['', Validators.required],\r\n    });\r\n    window.addEventListener('online',  this.onNetworkStatusChange.bind(this));\r\n    window.addEventListener('offline', this.onNetworkStatusChange.bind(this));\r\n\r\n    this.pushNotification();\r\n    this.swPush.messages.subscribe(message => console.log(message));\r\n    this.swPush.notificationClicks.subscribe(\r\n      ({action, notification}) => {\r\n        window.open(notification.data);\r\n      }\r\n    )\r\n  }\r\n\r\n  onSearch(): void {\r\n    if (!this.searchForm.valid) { return; }\r\n    this.router.navigate(['search'], { queryParams: {query: this.searchForm.get('search').value}});\r\n  }\r\n\r\n  onNetworkStatusChange(): void {\r\n    this.offline = !navigator.onLine;\r\n    console.log('offline ' + this.offline);\r\n  }\r\n\r\n  pushNotification() {\r\n    if (!this.swPush.isEnabled) {\r\n      console.log('Notification is not enabled');\r\n      return;\r\n    }\r\n\r\n    this.swPush.requestSubscription({\r\n      serverPublicKey: this.notifPublicKey\r\n    })\r\n    .then(sub => {\r\n      console.log(JSON.stringify(sub))\r\n      this.pushNotif = sub;\r\n    })\r\n    .catch(err => console.log(err))\r\n  }\r\n\r\n  postEP() {\r\n    console.log(this.pushNotif);\r\n\r\n    if (this.pushNotif != undefined) {\r\n      this.http.post('http://notif-dummy.herokuapp.com/notif', this.pushNotif, \r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/json; charset=utf-8', \r\n          'Access-Control-Allow-Origin': '*'\r\n        }\r\n      })\r\n      .subscribe(\r\n        res => {},\r\n        err => {\r\n          this.idbService.addEP(this.pushNotif)\r\n          .then(this.backgroundSync)\r\n          .catch(console.log);\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  backgroundSync() {\r\n    navigator.serviceWorker.ready.then((swRegistration) =>\r\n      swRegistration.sync.register('notif')\r\n    ).catch(console.log)\r\n  }\r\n}\r\n\r\n\r\ninterface SyncManager {\r\n  getTags(): Promise<string[]>;\r\n  register(tag: string): Promise<void>;\r\n}\r\n\r\ndeclare global {\r\n  interface ServiceWorkerRegistration {\r\n    readonly sync: SyncManager;\r\n  }\r\n}","<mat-toolbar color=\"primary\" class=\"expanded-toolbar\">\r\n  <div *ngIf=\"offline\">offline</div>\r\n  <span>\r\n    <button mat-button routerLink=\"/\">{{title}}</button>\r\n    <button mat-button routerLink=\"/\"><mat-icon>home</mat-icon></button>\r\n    <button mat-button (click)=\"postEP()\">Notif</button>\r\n  </span>\r\n  <div fxLayout=\"row\" fxShow=\"false\" fxShow.gt-sm>\r\n    <form [formGroup]=\"searchForm\" (ngSubmit)=\"onSearch()\">\r\n      <div class=\"input-group\">\r\n        <input class=\"input-group-field\" type=\"search\" value=\"\" placeholder=\"Search\" formControlName=\"search\">\r\n        <div class=\"input-group-button\">\r\n          <button mat-flat-button color=\"accent\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <button mat-button [mat-menu-trigger-for]=\"menu\" fxHide=\"false\" fxHide.gt-sm>\r\n    <mat-icon>menu</mat-icon>\r\n  </button>\r\n</mat-toolbar>\r\n<mat-menu x-position=\"before\" #menu=\"matMenu\">\r\n  <button mat-menu-item routerLink=\"/\">\r\n    <mat-icon>home</mat-icon>\r\n    Home\r\n  </button>\r\n\r\n  <form [formGroup]=\"searchForm\" (ngSubmit)=\"onSearch()\">\r\n    <div class=\"input-group\">\r\n      <input class=\"input-group-field\" type=\"search\" value=\"\" placeholder=\"Search\" formControlName=\"search\">\r\n      <div class=\"input-group-button\">\r\n        <button mat-button routerLink=\"/\">\r\n          <mat-icon>magnify</mat-icon>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</mat-menu>\r\n<router-outlet></router-outlet>\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpEvent, HttpRequest, HttpResponse, HttpInterceptor, HttpHandler } from '@angular/common/http';\r\nimport { Observable, of } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { RequestCache } from './request-cache.service';\r\n\r\n@Injectable()\r\nexport class CachingInterceptor implements HttpInterceptor {\r\n  constructor(private cache: RequestCache) {}\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler) {\r\n    const cachedResponse = this.cache.get(req);\r\n    return cachedResponse ? of(cachedResponse) : this.sendRequest(req, next, this.cache);\r\n  }\r\n\r\n  sendRequest(req: HttpRequest<any>, next: HttpHandler,\r\n              cache: RequestCache): Observable<HttpEvent<any>> {\r\n    return next.handle(req).pipe(\r\n      tap(event => {\r\n        if (event instanceof HttpResponse) {\r\n          cache.put(req, event);\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { SearchComponent } from './search/search.component';\r\nimport { DetailsComponent } from './details/details.component';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { environment } from '../environments/environment';\r\nimport { CachingInterceptor } from './cache/caching-interceptor.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HomeComponent,\r\n    SearchComponent,\r\n    DetailsComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    HttpClientModule,\r\n    BrowserAnimationsModule,\r\n    FlexLayoutModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatToolbarModule,\r\n    MatMenuModule,\r\n    MatIconModule,\r\n    MatCardModule,\r\n    MatButtonModule,\r\n    MatTableModule,\r\n    MatDividerModule,\r\n    MatProgressSpinnerModule,\r\n    AppRoutingModule,\r\n    ServiceWorkerModule.register('service-worker.js', {\r\n      enabled: environment.production,\r\n      // Register the ServiceWorker as soon as the app is stable\r\n      // or after 30 seconds (whichever comes first).\r\n      registrationStrategy: 'registerWhenStable:30000'\r\n    }),\r\n  ],\r\n  providers: [\r\n    { provide: HTTP_INTERCEPTORS, useClass: CachingInterceptor, multi: true }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Injectable } from '@angular/core';\nimport { DBSchema, IDBPDatabase, openDB } from 'idb';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IdbService {\n  private db: IDBPDatabase<DB>;\n\n  constructor() {\n    this.connectDB();\n   }\n\n  async connectDB() {\n    this.db = await openDB<DB>('my-db', 1, {\n      upgrade(db) {\n        db.createObjectStore('notif-store')\n      }\n    })\n  }\n\n  addEP(ep: PushSubscription) {\n    let eee = {\n      endpoint: 'https://fcm.googleapis.com/fcm/send/eRtHeBGy0KQ:APA91bEL7jzFosQ5mAhj4M6IAVhNkK0O7Iqvw_0I8PvQOSmJGAn386kpgDyyQtriZloS163jpPXEGQTlei4zPhE6QlIgw8oIuiXuV9yHQzGLATj0ui36VpC7C7FINMjzUgo3Y-ez7iW3',\n      expirationTime: null,\n      keys: {\n        p256dh: 'BAmjpeeBVFqfCbscAER_5m92ZG797YxR3rllDa_6usmnUilgjMI7OPNI17x60HDYxNWyLzAKzA-4ek-81_E6jDQ',\n        auth: 'LIevD8hbiOTYNPoJnT7iXg'\n      }\n    }\n    return this.db.put('notif-store', eee, 'endpoint');\n  }\n\n  deleteEP(key: string) {\n    return this.db.delete('notif-store', key);\n  }\n}\n\ninterface DB extends DBSchema {\n  'notif-store': {\n    key: string,\n    value: any\n  }\n}\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { BooksService } from '../books/books.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.css']\r\n})\r\nexport class SearchComponent implements OnInit {\r\n  private subscription: Subscription;\r\n\r\n  displayedColumns: string[] = ['title', 'author', 'publication', 'details'];\r\n  books = new MatTableDataSource<any>();\r\n\r\n  constructor(private route: ActivatedRoute,\r\n              private router: Router,\r\n              private bookService: BooksService) { }\r\n\r\n  ngOnInit() {\r\n    this.subscription = this.route.queryParams.subscribe(params => {\r\n      this.searchBooks(params['query']);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  async searchBooks(query: string) {\r\n    const results = await this.bookService.searchBooks(query);\r\n\r\n    this.books.data = results.docs;\r\n  }\r\n\r\n  viewDetails(book) {\r\n    console.log(book);\r\n    this.router.navigate(['details'], { queryParams: {\r\n      title: book.title,\r\n      authors: book.author_name && book.author_name.join(', '),\r\n      year: book.first_publish_year,\r\n      cover_id: book.cover_edition_key\r\n    }});\r\n  }\r\n}\r\n","<h1 class=\"h1\">Search Results</h1>\r\n<div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutAlign=\"center\" class=\"products\">\r\n  <table mat-table fxFlex=\"100%\" fxFlex.gt-sm=\"66%\" [dataSource]=\"books\" class=\"mat-elevation-z1\">\r\n    <ng-container matColumnDef=\"title\">\r\n      <th mat-header-cell *matHeaderCellDef>Title</th>\r\n      <td mat-cell *matCellDef=\"let book\"> {{book.title}} </td>\r\n    </ng-container>\r\n    <ng-container matColumnDef=\"author\">\r\n      <th mat-header-cell *matHeaderCellDef>Author</th>\r\n      <td mat-cell *matCellDef=\"let book\"> {{book.author_name && book.author_name.join(', ')}} </td>\r\n    </ng-container>\r\n    <ng-container matColumnDef=\"publication\">\r\n      <th mat-header-cell *matHeaderCellDef>Pub. Year</th>\r\n      <td mat-cell *matCellDef=\"let book\"> {{book.first_publish_year}} </td>\r\n    </ng-container>\r\n    <ng-container matColumnDef=\"details\">\r\n      <th mat-header-cell *matHeaderCellDef></th>\r\n      <td mat-cell *matCellDef=\"let book\">\r\n        <button mat-icon-button (click)=\"viewDetails(book)\"><mat-icon>visibility</mat-icon></button>\r\n      </td>\r\n    </ng-container>\r\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n  </table>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\r\n\r\nconst baseUrl = 'https://openlibrary.org';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BooksService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  async get(route: string, data?: any) {\r\n    const url = baseUrl+route;\r\n    let params = new HttpParams();\r\n\r\n    if (data !== undefined) {\r\n      Object.getOwnPropertyNames(data).forEach(key => {\r\n        params = params.set(key, data[key]);\r\n      });\r\n    }\r\n\r\n    const result = this.http.get(url, {\r\n      responseType: 'json',\r\n      params: params,\r\n      headers: {\r\n        'Access-Control-Allow-Origin': '*',\r\n        'Access-Control-Allow-Methods': 'GET,POST'\r\n      }\r\n    });\r\n\r\n    return new Promise<any>((resolve, reject) => {\r\n      result.subscribe(resolve as any, reject as any);\r\n    });\r\n  }\r\n\r\n  searchBooks(query: string) {\r\n    return this.get('/search.json/', {title: query});\r\n  }\r\n\r\n  searchAuthor(query: string) {\r\n    return this.get('/search.json/', {author: query})\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { SearchComponent } from './search/search.component';\r\nimport { DetailsComponent } from './details/details.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: HomeComponent },\r\n  { path: 'search', component: SearchComponent },\r\n  { path: 'details', component: DetailsComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}